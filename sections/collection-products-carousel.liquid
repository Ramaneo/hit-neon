<style>
                  .tabs {
                    margin: 0;
                    list-style: none;
                    display: flex;
                    margin: auto;
                    padding: 0px;
                  }
                  .tabs li {
                    {% comment %} float: left; {% endcomment %}
                    padding: 0;
                    text-align: center;
                    margin-bottom: 20px;
                  }
                  .tabs a {
                    {% comment %} display: block; {% endcomment %}
                    text-decoration: none;
                    color: #6d6d6d;
                    padding: 18px 26px;
                    border-radius: 35px;
                    line-height: 3.13px;
                    width: max-content;
                    font-size: 14px;
                  }
                  .collection-button {
                  cursor: pointer !important;
                }
                .tabs a.active-content {
                  background-color: #8ECAE6;
                  color: #fff;
              }
              .products-container .owl-nav button.owl-prev {
                color: #8ECAE6;
                border-radius: 50%;
                border: 1px solid #8ECAE6;
                height: 40px;
                margin: 0 5px;
                font-size: 40px;
                line-height: normal;
                display: flex;
                width: 40px;
                align-items: center;
                justify-content: center;
                align-content: center;
                padding-bottom: 6px !important;
                left: -5%;
            }
            .products-container .owl-nav button.owl-next {
              color: #8ECAE6;
              border-radius: 50%;
              border: 1px solid #8ECAE6;
              height: 40px;
              margin: 0 5px;
              font-size: 40px;
              line-height: normal;
              display: flex;
              width: 40px;
              align-items: center;
              justify-content: center;
              align-content: center;
              padding-bottom: 6px !important;
              right: -5%;
          }
          .products-container .owl-nav button {
            position: absolute;
            top: 33%;
            background-color: #000;
            color: #fff;
            margin: 0;
            transition: all 0.3s ease-in-out;
        }
        .products-container .owl-item {
          width: 260px !important;
          margin-right: 20px !important;
        }
        .card .media.media--hover-effect > img:only-child, .card-wrapper .media.media--hover-effect > img:only-child {
          border-radius: 15px;
      }
      .owl-carousel .owl-dots.disabled, .owl-carousel .owl-nav.disabled {
        display: flex;
    }
    a.full-unstyled-link {
      font-size: 16px;
      line-height: 1.5;
      letter-spacing: normal;
      text-align: left;
      color: #333;
      font-weight: 600;
  }
</style>

<section
  style="
    margin-top: 100px; max-width: 120rem; padding: 0 20px;
    margin-left: auto;
    margin-right: auto;
  "
>
  <ul class="tabs">
    {% for collection in collections %}
      <li>
        <a class="collection-button" data-collection-id="{{ collection.handle }}">{{ collection.title }}</a>
      </li>
    {% endfor %}
  </ul>

  {% for collection in collections %}
    <div class="products-container" id="products-container-{{ collection.handle }}" style="display: none">
      {% assign products = collection.products %}
      {% if products.size > 0 %}
        <slider-component
          class="slider-mobile-gutter page-width"
          role="region"
          aria-roledescription="{{ 'sections.slideshow.carousel' | t }}"
        >
          <ul
            id="Slider-{{ section.id }}"
            class="grid product-grid contains-card owl-carousel contains-card--product contains-card--standard grid---col-desktop grid--1-col-tablet-down owl-loaded owl-drag"
            role="list"
            aria-label="Slider"
          >
            <div class="owl-stage-outer owl-height" style="height: 436.797px;">
              <div
                class="owl-stage"
              >
                {% for product in products %}
                  {% comment %}
                    <li
                      class="grid__item slider__slide scroll-trigger animate--slide-in"
                      data-cascade
                      style="--animation-order: {{ forloop.index }};"
                    >
                      {% comment %}
                        <h3>{{ product.title }}</h3>
                        <p>{{ product.description }}</p>
                        <!-- Add more product details as needed -->
                      {% endcomment %}
                        {% render 'card-product',
                          card_product: product,
                          media_aspect_ratio: 'square',
                          image_shape: 'default',
                          show_secondary_image: false,
                          show_vendor: false,
                          show_rating: false,
                          show_quick_add: false,
                          section_id: section.id
                        %}
                      </li>
                  {% endcomment %}
                  <div class="owl-item cloned">
                    <li
                      class="item grid__item"
                      style="
                        width: 100%;
                        max-width: 100%;
                      "
                    >
                      <link
                        href="//crazyneon.com/cdn/shop/t/65/assets/component-rating.css?v=24573085263941240431707996523"
                        rel="stylesheet"
                        type="text/css"
                        media="all"
                      >
                      <div class="card-wrapper product-card-wrapper underline-links-hover">
                        <div
                          class="
                            card
                            card--standard
                             card--media
                          "
                          style="--ratio-percent: 100%;"
                        >
                          <div class="card__inner ratio" style="--ratio-percent: 100%;">
                            <div class="card__media">
                              <div class="media media--transparent media--hover-effect">
                                <img
                                  srcset="
                                    {%- if product.featured_media.width >= 165 -%}{{ product.featured_media | image_url: width: 165 }} 165w,{%- endif -%}
                                    {%- if product.featured_media.width >= 360 -%}{{ product.featured_media | image_url: width: 360 }} 360w,{%- endif -%}
                                    {%- if product.featured_media.width >= 533 -%}{{ product.featured_media | image_url: width: 533 }} 533w,{%- endif -%}
                                    {%- if product.featured_media.width >= 720 -%}{{ product.featured_media | image_url: width: 720 }} 720w,{%- endif -%}
                                    {%- if product.featured_media.width >= 940 -%}{{ product.featured_media | image_url: width: 940 }} 940w,{%- endif -%}
                                    {%- if product.featured_media.width >= 1066 -%}{{ product.featured_media | image_url: width: 1066 }} 1066w,{%- endif -%}
                                    {{ product.featured_media | image_url }} {{ product.featured_media.width }}w
                                  "
                                  src="{{ product.featured_media | image_url: width: 533 }}"
                                  sizes="(min-width: 1200px) 267px, (min-width: 990px) calc((100vw - 130px) / 4), (min-width: 750px) calc((100vw - 120px) / 3), calc((100vw - 35px) / 2)"
                                  alt="Always And Forever Neon Sign | CNUS000167 - Red"
                                  class="motion-reduce"
                                  loading="lazy"
                                  width="1080"
                                  height="1080"
                                >
                              </div>
                            </div>
                            <div class="card__content">
                              <div class="card__information">
                                <h3 class="card__heading">
                                  <a
                                    href="/products/always-and-forever-neon-sign-cnus000167"
                                    class="full-unstyled-link"
                                    aria-labelledby="StandardCardNoMediaLink-template--16585127297206__04a63442-5b8f-4975-9129-f4af08f3330f-7512281546934 NoMediaStandardBadge-template--16585127297206__04a63442-5b8f-4975-9129-f4af08f3330f-7512281546934"
                                  >
                                    {{ product.title }}
                                  </a>
                                </h3>
                              </div>
                              <div class="card__badge bottom left">
                                <span
                                  id="NoMediaStandardBadge-template--16585127297206__04a63442-5b8f-4975-9129-f4af08f3330f-7512281546934"
                                  class="badge badge--bottom-left color-accent-2"
                                  >Sale</span
                                >
                              </div>
                            </div>
                          </div>
                          <div class="card__content">
                            <div class="card__information">
                              <h3
                                class="card__heading h5"
                                id="title-template--16585127297206__04a63442-5b8f-4975-9129-f4af08f3330f-7512281546934"
                              >
                                <a
                                  href="/products/always-and-forever-neon-sign-cnus000167"
                                  id="CardLink-template--16585127297206__04a63442-5b8f-4975-9129-f4af08f3330f-7512281546934"
                                  class="full-unstyled-link"
                                  aria-labelledby="CardLink-template--16585127297206__04a63442-5b8f-4975-9129-f4af08f3330f-7512281546934 Badge-template--16585127297206__04a63442-5b8f-4975-9129-f4af08f3330f-7512281546934"
                                >
                                  {{ product.title }}
                                </a>
                              </h3>
                              <!-- TrustBox script -->
                              <script
                                type="text/javascript"
                                src="//widget.trustpilot.com/bootstrap/v5/tp.widget.bootstrap.min.js"
                                async=""
                              ></script>
                              <!-- End TrustBox script -->
                              <!-- TrustBox widget - Micro TrustScore -->
                              <div
                                class="trustpilot-widget"
                                data-locale="en-US"
                                data-template-id="5419b637fa0340045cd0c936"
                                data-businessunit-id="61c4855b2f493a1a7cd8129f"
                                data-style-height="20px"
                                data-style-width="100%"
                                data-theme="light"
                                style="padding: 8px 0px; left: -10px; position: relative;"
                              >
                                <iframe
                                  title="Customer reviews powered by Trustpilot"
                                  loading="auto"
                                  src="https://widget.trustpilot.com/trustboxes/5419b637fa0340045cd0c936/index.html?templateId=5419b637fa0340045cd0c936&amp;businessunitId=61c4855b2f493a1a7cd8129f#locale=en-US&amp;styleHeight=20px&amp;styleWidth=100%25&amp;theme=light"
                                  style="position: relative; height: 20px; width: 100%; border-style: none; display: block; overflow: hidden;"
                                ></iframe>
                              </div>
                              <!-- End TrustBox widget -->
                              <div class="card-information">
                                <span class="caption-large light"></span>
                                {% render 'price', product: product, show_compare_at_price: true %}
                              </div>
                            </div>
                            <div class="card__badge bottom left">
                              <span
                                id="Badge-template--16585127297206__04a63442-5b8f-4975-9129-f4af08f3330f-7512281546934"
                                class="badge badge--bottom-left color-accent-2"
                                >Sale</span
                              >
                            </div>
                          </div>
                        </div>
                      </div>
                    </li>
                  </div>
                {% endfor %}
              </div>
            </div>
          </ul>
        </slider-component>
      {% endif %}
    </div>
  {% endfor %}
</section>

<script>
  $('.owl-carousel').owlCarousel({
    loop: true,
    margin: 10,
    nav: true,
    responsive: {
      0: {
        items: 1,
      },
      600: {
        items: 3,
      },
      1000: {
        items: 5,
      },
    },
  });
  document.addEventListener('DOMContentLoaded', function () {
    const collectionButtons = document.querySelectorAll('.collection-button');
    const productsContainers = document.querySelectorAll('.products-container');

    collectionButtons[0].classList.add('active-content');
    productsContainers[0].style.display = 'block';

    collectionButtons.forEach((button) => {
      button.addEventListener('click', function () {
        collectionButtons.forEach((btn) => {
          btn.classList.remove('active-content');
        });

        this.classList.add('active-content');

        const collectionId = this.getAttribute('data-collection-id');
        const productsContainer = document.getElementById(`products-container-${collectionId}`);

        // Show the products container for the clicked collection
        productsContainers.forEach((container) => {
          if (container.id === `products-container-${collectionId}`) {
            container.style.display = 'block';
            // Fetch and render products only if not already fetched
            if (container.innerHTML.trim() === '') {
              fetchProductsForCollection(collectionId)
                .then((products) => {
                  // Render products in the respective products container
                  renderProducts(products, container);
                })
                .catch((error) => {
                  console.error('Error fetching products:', error);
                });
            }
          } else {
            container.style.display = 'none';
          }
        });
      });
    });

    function fetchProductsForCollection(collectionId) {
      return fetch(`/collections/${collectionId}.json`)
        .then((response) => response.json())
        .then((data) => {
          return data.products;
        });
    }

    function renderProducts(products, container) {
      container.innerHTML = ''; // Clear previous products

      products.forEach((product) => {
        const productElement = document.createElement('div');
        productElement.innerHTML = `
            <h3>${product.title}</h3>
            <p>${product.description}</p>
            <!-- Add more product details as needed -->
          `;
        container.appendChild(productElement);
      });
    }
  });
</script>

{% schema %}
{
  "presets": [
    {
      "name": "Collections Carousel",
      "category": "Reference"
    }
  ]
}
{% endschema %}
